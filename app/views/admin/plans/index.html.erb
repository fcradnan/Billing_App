<div class="d-flex justify-content-center align-items-start" style="min-height: 100vh; padding-top: 60px; background-color: #f8f9fa;">
  <div class="card shadow-lg border-0" style="width: 80%; max-width: 1000px;">
    <div class="card-body">


      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="fw-bold mb-0" style="color: #5a0d69;">All Plans</h1>
        <%= link_to "➕ New Plan", new_admin_plan_path, class: "btn text-white px-4", style: "background-color:#5a0d69;" %>
      </div>

    
      <div class="table-responsive">
        <table class="table table-hover table-striped align-middle text-center mb-0" style="table-layout: fixed;">
          <thead class="table-light">
            <tr>
              <th class="text-start ps-5" style="width: 35%;">Name</th>
              <th style="width: 30%;">Monthly Fee</th>
              <th class="text-end pe-5" style="width: 35%;">Actions</th>
            </tr>
          </thead>

          <tbody>
            <% @plans.each do |plan| %>
              <tr class="clickable-row" style="cursor: pointer;" data-href="<%= admin_plan_path(plan) %>">
                <td class="text-start ps-5 fw-bold" style="color:#5a0d69;">
                  <%= plan.name %>
                </td>

                <td><%= number_to_currency(plan.monthly_fee, unit: "Rs ") %></td>

                <td class="text-end pe-5">
                  <div class="d-inline-flex gap-2">
                    <%= link_to edit_admin_plan_path(plan), class: "btn btn-sm btn-outline-primary" do %>
                        Edit
                    <% end %>

                    <%= button_to admin_plan_path(plan),
                                  method: :delete,
                                  data: { confirm: "Are you sure you want to delete #{plan.name}?" },
                                  class: "btn btn-sm btn-outline-danger d-flex align-items-center" do %>
                    <i class="bi bi-trash-fill me-1"></i> 
                        Delete
                    <% end %>
                   
                                
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

    
      <div class="text-center mt-4">
        <%= link_to "⬅ Back to Dashboard", admin_dashboard_path, class: "btn btn-outline-secondary px-4" %>
      </div>

    </div>
  </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function() {
    const rows = document.querySelectorAll(".clickable-row");
    rows.forEach(row => {
      row.addEventListener("click", function(e) {
       
        if(e.target.closest("a.btn")) return;
        window.location = row.dataset.href;
      });
    });
  });
</script>
